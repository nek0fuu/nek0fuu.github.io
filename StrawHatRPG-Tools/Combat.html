
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/Power.css">
    <title>SHRPG: Combat Simulator</title>
</head>
<body>
    <div id="filters-col">
        <div id="controls">
            <h1 class="col-headers">StrawHatRPG Combat Simulator</h1>
            <a href="https://docs.google.com/spreadsheets/d/11DBV69f-U9T1EXbdI_AvjHpp7XzSs38fH9eKqdx2sUw">Stats Sheet</a>
            <!-- Posts Collector Inputs -->
            <ul>
            </ul>
            <ul id="posts-inputs-list">
                <h2 class="col-headers">Attacker</h2>
                <!--<li>
                    <label class="statIPL">Total HP</label>
                    <input type="number" class="statIPF IP" id="attthpIPF" value="50" min="35" max="3250">
                </li>
                <li>
                    <label class="statIPL">Current HP</label>
                    <input type="number" class="statIPF IP" id="attchpIPF" value="50" min="35" max="3250">
                </li><br><br>-->
                <li>
                    <label class="statIPL">Strength</label>
                    <input type="number" class="statIPF waveReq IP" id="attstrIPF" value="10" min="7" max="650">
                </li>

                <li>
                    <label class="statIPL">Speed</label>
                    <input type="number" class="statIPF waveReq IP" id="attspdIPF" value="10" min="7" max="650">
                </li>
                
                <li>
                    <label class="statIPL">Dexterity</label>
                    <input type="number" class="statIPF slashReq IP" id="attdexIPF" value="10" min="7" max="650">
                </li>
                <li>
                    <label class="statIPL">Will</label>
                    <input type="number" class="statIPF slashReq IP" id="attwillIPF" value="10" min="7" max="650">
                </li>
                <!--<li>
                    <label class="statIPL">Total Stats</label>
                    <input type="number" class="statIPF slashReq IP" id="totalIPF" value="50" min="50" max="2500">
                </li>--><br>
                </ul>
            <ul id="posts-inputs-list">
                <li>
                    <label class="AttackIPL">Attack Type/Level</label>
                    <select class="AttackIPF IP" id="attattackLevel">
                        <option value="NS9">Normal Attack</option>
                        <option value="IW1">Impact Wave Level 1</option>
                        <option value="IW2">Impact Wave Level 2</option>
                        <option value="IW3">Impact Wave Level 3</option>
                        <option value="IW4">Impact Wave Level 4</option>
                        <option value="IW5">Impact Wave Level 5</option>
                        <option value="FS1">Flying Slash Level 1</option>
                        <option value="FS2">Flying Slash Level 2</option>
                        <option value="FS3">Flying Slash Level 3</option>
                        <option value="FS4">Flying Slash Level 4</option>
                        <option value="FS5">Flying Slash Level 5</option>
                        <option value="FSS">Flying Slash Specialzation</option>
                        <option value="SH2">Shigan Level 1</option>
                        <option value="SH4">Shigan Level 2</option>
                        <option value="SH5">Shigan Level 3</option>
                        <option value="SHS">Shigan Specialzation</option>
                        <option value="RK1">Rankyaku Level 1</option>
                        <option value="RK2">Rankyaku Level 2</option>
                        <option value="RK4">Rankyaku Level 3</option>
                        <option value="RK5">Rankykau Specialzation</option>
                        <option value="RG7">Rokuogan Level 1</option>
                        <option value="RG8">Rokuogan Level 2</option>
                        <option value="RG9">Rokuogan Level 3</option>
                        <option value="RGS">Rokuogan Specialzation</option>
                    </select>
                </li>
                <li>
                    <label class="statIPL">Attack Specialization</label>
                    <input type="number" class="SlashIPF IP" id="attspecBoost" value="0" min="0" max="25">
                </li><br><br>
                <li>
                    <label class="AttackIPL">Haki</label>
                    <select class="HakiIPF IP" id="attHakiLevel">
                        <option value="NA">None</option>
                        <option value="HC1">Haki Coating 1</option>
                        <option value="HC2">Haki Coating 2</option>
                        <option value="HC3">Haki Coating 3</option>
                        <option value="HR1">Ryou 1</option>
                        <option value="HR2">Ryou 2</option>
                        <option value="HCS">Haki Specialization</option>
                    </select>
                </li>
                <li>
                    <label class="statIPL">Haki Specialization</label>
                    <input type="number" class="SlashIPF IP" id="atthakispecBoost" value="0" min="0" max="25">
                </li><br><br>
                <li>
                    <label class="SlashIPL">Blade Grade</label>
                    <select class="SlashIPF IP" id="attbladeGrade">
                        <option value="NON">Non-Meito</option>
                        <option value="WAZ">Wazamono</option>
                        <option value="RYO">Ryo Wazamono</option>
                        <option value="OWA">O Wazamono</option>
                        <option value="SOW">Saijo O Wazamono</option>
                    </select>
                </li><br><br>
                <li>
                    <label class="SlashIPL">Power Attack</label>
                    <input type="checkbox" class="SlashIPF IP" id="attPowCheck" name="PowCheck" value="Pow">
                </li>
                <!--<li>
                    <label class="SlashIPL">Blood Lust</label>
                    <input type="checkbox" class="SlashIPF IP" id="attBloodLust" name="BloodLust" value="BloodLust">
                </li>-->
                <br><br>
                <li>
                    <label class="SlashIPL">DF</label>
                    <input type="radio" class="SlashIPF IP" id="attDFCheck" name="DFUA" value="DF">
                </li>
                <li>
                    <label class="SlashIPL">UA</label>
                    <input type="radio" class="SlashIPF IP" id="attUACheck" name="DFUA" value="UA">
                </li>
                <li>
                    <label class="SlashIPL">None</label>
                    <input type="radio" class="SlashIPF IP" id="attNACheck" name="DFUA" value="NA">
                </li><br>
                <!--<li>
                    <label class="statIPL">Situation Modifier</label>
                    <input type="number" class="SlashIPF IP" id="sitMod" value="0" min="0" max="100">
                </li>-->
            </ul>
            
            <ul id="results-list">
                <li>
                    <p>
                        <strong>Attack Power</strong>
                        <span class="power" id="attPow"><strong>0</strong></span>
                    </p>
                </li>
                
            </ul>
            <hr>
            
            <!--<hr>
            <p id="slashReq-error-msg" class="error-msg">You do not have enough stats for the current level Flying Slash</p>
            <ul id="results-list">
                <li>
                    <p>
                        <strong>Damage to Defender</strong>
                        <span class="power" id="dmgToDef"><strong>0</strong></span>
                    </p>
                </li>
            </ul>-->
            
            
            
            <!--<button id="calc-btn" onclick="mainCalcFunction()">Calculate Power</button>-->
            
            <!--***************************************************
            function calculateDefense()
{
    //var chp=document.getElementById("defchpIPF").valueAsNumber;
    //var thp=document.getElementById("defthpIPF").valueAsNumber;
    var basestam=document.getElementById("defstmIPF").valueAsNumber;
    var basewill=document.getElementById("defwillIPF").valueAsNumber;
    var tekkai=document.getElementById("deftekkaiLevel").value;
    var haki=document.getElementById("defHakiLevel").value;
    var tspec=document.getElementById("defTekkaiSpecBoost").valueAsNumber;
    var hspec=document.getElementById("defHakiSpecBoost").valueAsNumber;
    var armor=document.getElementById("defarmIPF").valueAsNumber;
    var armorPerk=document.getElementById("defArmorPerkLevel").value;
    var atthakiLevel=document.getElementById("attHakiLevel").value;
    var attackLevel=document.getElementById("attattackLevel").value;
    var totMit,defPower,maxArmor;
    var statDef,HakiMult,TekkaiMult,HakiMin,TekkaiMin,HakiBoost,TekkaiBoost
    var stamFactor=.175,willFactor=0.075;
    var overflow=.25;
    
    statDef=basestam*stamFactor+basewill*willFactor;
    
    if(statDef>basestam||(statDef>basewill*3))
        {
            if(basestam<basewill*3)
                {
                    statPower=(statDef-basestam)*overflow+basestam;
                }
            else
                {
                    statPower=(statDef-basewill*3)*overflow+basewill*3;
                }
        }
    
    if(tekkai!="TKS")
        {
            document.getElementById("defTekkaiSpecBoost").valueAsNumber=0;
            document.getElementById("defTekkaiSpecBoost").disabled=true;
        }
    else
        {   
            document.getElementById("defTekkaiSpecBoost").disabled=false;
        }
    if(haki!="HCS")
        {
            document.getElementById("defHakiSpecBoost").valueAsNumber=0;
            document.getElementById("defHakiSpecBoost").disabled=true;
        }
        else
        {   
            document.getElementById("defHakiSpecBoost").disabled=false;
        }
    switch(tekkai)
        {
            case "TK1":TekkaiMult=0.100;break;
            case "TK2":TekkaiMult=0.175;break;
            case "TK3":TekkaiMult=0.250;break;
            case "TKS":TekkaiMult=0.250+tspec/100;break;
            default:TekkaiMult=0;break;
        }
    switch(haki)
        {
            case "HC1":HakiMult=0.150;break;
            case "HC2":HakiMult=0.200;break;
            case "HC3":HakiMult=0.250;break;
            case "HCS":HakiMult=0.250+hspec/100;break;    
            default:HakiMult=0;break;
        }
    //TekkaiMin=TekkaiMult*600;
    //HakiMin=HakiMult*600;
    
    HakiBoost=HakiMult*(basewill+900);
    TekkaiBoost=TekkaiMult*(basestam+1000);
    
    
    switch(armorPerk)
        {
            case "AP0":maxArmor=100;break;
            case "AP1":maxArmor=200;break;
            case "AP2":maxArmor=300;break;
            case "AP3":maxArmor=400;break;
            case "AP4":maxArmor=500;break;
            default:maxArmor=0;
        }
    if(armor>maxArmor)
        {
            armor=(armor-maxArmor)*overflow+maxArmor;
        }
    defPower=statDef+HakiBoost+TekkaiBoost+armor;
    
    /*if((defPower<TekkaiMin)||(defPower<HakiMin))
        {
            if(TekkaiMin<HakiMin)
                {
                    defPower=HakiMin;
                }
            else
            {
                defPower=TekkaiMin;
            }
        }*/
    
    totMit=mitigate(attPow,adjStat(defPower));
    switch(atthakiLevel)
        {
            case "HR1":totMit*=.80;break;
            case "HR2":totMit*=.60;break;
            default:break;
        }
    switch(attackLevel)
        {           
            case "RG7":totMit*=.95;break;
            case "RG8":totMit*=.90;break;
            case "RG9":totMit*=.825;break;
            default:break;
                
        }

    document.getElementById("totMit").textContent=Math.round((totMit/attPow)*100)+"%";
    document.getElementById("IntMit").textContent=Math.round(adjStat(defPower));
}

function mitigate(power,hardness)
{
    var mitRate=0,mitAmt,maxblock,minblock;
    
    //hardness=adjStat(hardness);
    minblock=.1+hardness/850*.3;
    maxblock=.6+hardness/850*.3;
    if(minblock>.4)
        {
            minblock=.4
        }
    if(maxblock>.9)
        {
            maxblock=.9;
        }
    mitRate=minblock+(1-(power/hardness)*(1-minblock));
    if(mitRate<minblock)
        {
            mitRate=minblock
        }
    mitAmt=mitRate*hardness;
    if(mitAmt>=power*maxblock)
        {
            mitAmt=power*maxblock;
        }
    return mitAmt;
}
function adjStat(basestat)
{
    var res=0,multiplier=1,increment=50,decreases=.005,decreasem=.99,decreaseincr=5;
    while(basestat>=increment&&multiplier>0)
        {
            res+=increment*multiplier;
            basestat-=increment;    
            multiplier*=decreasem;
            if(increment>10)
                {
                    increment-=decreaseincr;
                }
        }
    res+=basestat*multiplier;
    return res;
}
            *****************************-->
        </div>
    </div>
    <script type="text/javascript" src="js/Combat.js"></script>
</body>
</html>